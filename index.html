<html>
<head>
	<title>Angular QuickStart</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="resources/styles/style.css">
	<script src="node_modules/core-js/client/shim.min.js"></script>
	<script src="node_modules/zone.js/dist/zone.js"></script>
	<script src="node_modules/reflect-metadata/Reflect.js"></script>
	<script src="node_modules/systemjs/dist/system.src.js"></script>
	<script src="node_modules/socket.io-client/dist/socket.io.js"></script>
	<script>
		var socket = io.connect('http://localhost:3000');

		var playerType;

		socket.on('status', function (data) {
			console.log(data);
		});

		socket.on('playerType', function (data) {
			console.log('playerType', data.playerType);
			playerType = data.playerType;
		});

		socket.on('fieldState', function (data) {
			console.log(data);
		});

		socket.on('gameState', function (data) {
			console.log('HELLO', data);
		});

		var iteration = 0;
		var moves = [
			{
				x: 0,
				y: 0
			},
			{
				x: 1,
				y: 1
			},
			{
				x: 2,
				y: 2
			}
		];

		socket.on('makeMove', function (data) {
			console.info('got make move');
			setTimeout(function () {
				if(playerType == 1) {
					socket.emit('moveResult', moves[iteration]);
					console.warn('resultSent');
					iteration++;
				} else {
					socket.emit('moveResult', {
						x: 1,
						y: 2
					});
				}
			}, 2000)
		});


	</script>
	<!-- 2. Configure SystemJS -->
	<script src="systemjs.config.js"></script>
	<script>
		System.import('app').catch(function (err) {
			console.error(err);
		});
	</script>

</head>
<!-- 3. Display the application -->
<body>
<my-app>Loading...</my-app>
</body>
</html>
